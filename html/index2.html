<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
<style>
body {font-family: "Raleway", Arial, sans-serif}
.w3-row img {margin-bottom: -8px}
</style>
</head>
<body>

<div class="w3-content" style="max-width:1500px">

  <header class="w3-container w3-xlarge w3-padding-24">
    <a href="#" class="w3-left w3-button w3-white">MY ART</a>
    <a href="#about" class="w3-right w3-button w3-white">About</a>
  </header>

  <div class="w3-row">
    <div class="w3-half">
      <img src="../assets/images/streetart.jpg" style="width:100%">
      <img src="../assets/images/streetart2.jpg" style="width:100%">
      <img src="../assets/imagesstreetart5.jpg" style="width:100%">
      <img src="../assets/images/streetart.jpg">
    </div>

    <div class="w3-half">
      <img src="../assets/images/streetart3.jpg" style="width:100%">
      <img src="../assets/images/streetart4.jpg" style="width:100%">
    </div>
  </div>
  
</div>

<footer class="w3-light-grey w3-padding-64 w3-center" id="about">
  <h2>About</h2>
  <img src="/w3images/boy.jpg" class="w3-image w3-padding-32" width="300" height="300">
  <form style="margin:auto;width:60%" action="/action_page.php" target="_blank">
    <p>Just me, myself and I, exploring the universe of unknownment. I have a heart of love and an interest of lorem ipsum and mauris neque quam blog. I want to share my world with you. Praesent tincidunt sed tellus ut rutrum. Sed vitae justo condimentum, porta lectus vitae, ultricies congue gravida diam non fringilla. Praesent tincidunt sed tellus ut rutrum. Sed vitae justo condimentum, porta lectus vitae, ultricies congue gravida diam non fringilla.</p>
    <p class="w3-large w3-text-pink">Do not hesitate to contact me!</p>
    <div class="w3-section">
      <label><b>Name</b></label>
      <input class="w3-input w3-border" type="text" required name="Name">
    </div>
    <div class="w3-section">
      <label><b>Email</b></label>
      <input class="w3-input w3-border" type="text" required name="Email">
    </div>
    <div class="w3-section">
      <label><b>Message</b></label>
      <input class="w3-input w3-border" required name="Message">
    </div>
    <button type="submit" class="w3-button w3-block w3-dark-grey">Send</button>
  </form>

    <div class="card">
        <img src="http://fillmurray.com/g/300/300" id="img-preview" />
        <label class="file-upload-container" for="file-upload">
            <input id="file-upload" type="file"> Blah
        </label>

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.map"></script> -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>  
          'use strict'
      const cloudinary = require('cloudinary')
      const Promise = require('bluebird')
      const co = require('co')
      const fs = Promise.promisifyAll(require('fs'))
      const request = require('request')
      const moment = require('moment')
      // FILL THIS
      cloudinary.config({
        cloud_name: 'ronwab',
        api_key: '325349966656999',
        api_secret: 'WJ-hjK-uZVZXAO2QcMVxoJDKyEE'
      })

      const getResources = (tag, nextCursor) => new Promise((resolve, reject) => {
        let params = {resource_type: 'image', max_results: 500}
        if (nextCursor) params.next_cursor = nextCursor
        cloudinary.api.resources_by_tag(tag, (result) => {
          if (!result.resources) return reject(result)
          resolve(result)
        }, params)
      })

      const download = (uri, filename) => new Promise((resolve, reject) => {
        filename = `images/${filename}`
        request(uri).pipe(fs.createWriteStream(filename, {flags: 'w'})).on('close', resolve).on('error', reject)
      })

      const downloadAll = co.wrap(function * (tag, cursor = null) {
        let {
          resources,
          next_cursor: nextCursor,
          rate_limit_remaining: rateLimitRemaining,
          rate_limit_reset_at: rateLimitResetAt
        } = yield getResources(tag, cursor)
        if (rateLimitRemaining === 0) {
          let diff = moment(rateLimitResetAt).diff(moment())
          console.log('Waiting for', diff / 1000 / 60, 'minutes')
          yield Promise.delay(diff)
        }

        yield Promise.map(resources, (resource) => {
          let filename = resource.public_id.replace(/\//g, '_') + `.${resource.format}`
          console.log('Downloading', filename)
          return download(resource.url, filename)
        }, {concurrency: 10})

        if (nextCursor) {
          yield fs.writeFileAsync('next-cursor', nextCursor)
          console.log('downloading next cursor', nextCursor)
          yield downloadAll(tag, nextCursor)
        }
      })

      co(function * () {
        let cursor = null
        try {
          cursor = yield fs.readFileAsync('next-cursor', 'utf-8')
          console.log('got cursor from file', cursor)
        } catch (e) {
          console.log('no cursor file found')
        }
        yield downloadAll('YOUR-TAG-HERE', cursor)
        process.exit(0)
      }).catch((e) => console.error(e.stack))
    </script>